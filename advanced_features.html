<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">6.2.2. Advanced features</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.2.6" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="Fedora-Anaconda_Addon_Development_Guide-21-en-US-1-0" /><link rel="home" href="index.html" title="Anaconda Addon Development Guide" /><link rel="up" href="section_gui_support.html" title="6.2. Graphical user interface" /><link rel="prev" href="section_gui_support.html" title="6.2. Graphical user interface" /><link rel="next" href="section_tui.html" title="6.3. Textual user interface" /></head><body class="draft "><p id="title"><a class="left" href="http://www.fedoraproject.org"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="http://docs.fedoraproject.org"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="section_gui_support.html"><strong>Prev</strong></a></li><li class="home">Anaconda Addon Development Guide</li><li class="next"><a accesskey="n" href="section_tui.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div keep-together.within-column="always"><h4 class="title"><a id="advanced_features">
      ⁠</a>6.2.2. Advanced features</h4></div></div></div><div class="para">
					Because many spokes have a lot in common, the <span class="package">pyanaconda</span> package contains a lot of helper and utility functions and constructs, that may be used by hubs and spokes. Majority of them are available in the <span class="package">pyanaconda.ui.gui.utils</span> module. The Hello world addon demonstrates usage of the utility, that is used in a number of Anaconda's GUI code — the <code class="function">englightbox</code> context manager, that puts a window into a lightbox to make it better visible, focused and to prevent users from interaction with the underlying window. To demonstrate such functionality, the Hello world addon's GUI contains a button that runs a dialog. The dialog itself is a special class <code class="classname">HelloWorldDialog</code> inheriting from the <code class="classname">GUIObject</code> class defined in the <span class="package">pyanaconda.ui.gui.__init__</span> module. The dialog class defines the <code class="function">run</code> method that runs and destroys an internal Gtk dialog accessible through the <code class="varname">self.window</code> attribute that is populated thanks to the <code class="varname">mainWidgetName</code> class attribute with the same meaning as in case of the spoke. The code running the dialog within a lightbox is then very simple:
				</div><pre class="programlisting">        # every GUIObject gets ksdata in __init__
        dialog = HelloWorldDialog(self.data)

        # show dialog above the lightbox
        with enlightbox(self.window, dialog.window):
            dialog.run()
</pre><div class="para">
					The code simply creates an instance of the dialog and then uses the <code class="function">enlightbox</code> context manager to run the dialog within a lightbox. The context manager needs a reference to the window of the spoke and to the dialog's window to instantiate the lightbox for them.
				</div><div class="para">
					Another useful feature of the Anaconda's codebase is a possibility to define a spoke that will appear in the installation process as well as in the first boot when the <code class="command">Initial Setup</code> tool reusing the <span class="package">pyanaconda</span> package runs. All that is needed to make spoke available in the <code class="command">Initial Setup</code> is to inherit the special <code class="classname">FirstbootSpokeMixIn</code> class (or more precisely mixin) as the first inherited class. The other option is the <code class="classname">FirstbootOnlySpokeMixIn</code> <a id="idm242240009872">
      ⁠</a><a xmlns:d="http://docbook.org/ns/docbook" href="#ftn.idm242240009872" class="footnote"><sup class="footnote">[6]</sup></a> class/mixin which, as its name suggests, make spoke appear only in the <code class="command">Initial Setup</code> utility.
				</div><div class="para">
					There are many more advanced features provided by the <span class="package">pyanaconda</span> package (like the <span class="emphasis"><em>@gtk_action_wait</em></span> and <span class="emphasis"><em>@gtk_action_nowait</em></span> decorators), but they are out of scope of this guide. Readers are recommended to go through the Anaconda installer's sources that contain a lot of examples.
				</div><div class="footnotes"><br /><hr /><div id="ftn.idm242240009872" class="footnote"><div class="para"><a href="#idm242240009872" class="para"><sup class="para">[6] </sup></a>
						both those classes are defined in the <span class="package">pyanaconda.ui.common</span> module
					</div></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="section_gui_support.html"><strong>Prev</strong>6.2. Graphical user interface</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="section_tui.html"><strong>Next</strong>6.3. Textual user interface</a></li></ul></body></html>